(this["webpackJsonpgoit-react-hw-04-hook-image-finder"]=this["webpackJsonpgoit-react-hw-04-hook-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__kp_bw",Modal:"Modal_Modal__3XvGk",Button:"Modal_Button__88w1I"}},13:function(e,t,a){e.exports={Section:"Section_Section__3nbcr",Container:"Section_Container__2Eh-J"}},17:function(e,t,a){e.exports={Button:"Button_Button__1p4hx"}},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(6),o=a.n(c),s=a(4),l=a(13),i=a.n(l),u=a(1),m=function(e){var t=e.children,a=e.color;return Object(u.jsx)("section",{className:i.a.Section,children:Object(u.jsx)("div",{className:i.a.Container,style:{backgroundColor:"".concat(a)},children:t})})},j=a(14),b=a(3),d=a(5),h=a.n(d),g=function(e){var t=e.srs,a=e.alt,r=e.onClick,n=e.largeImageURL,c=e.myRef;return Object(u.jsx)(u.Fragment,{children:c?Object(u.jsx)("li",{ref:c,className:h.a.Images,onClick:function(){return r(n,a)},loading:"lazy",children:Object(u.jsx)("img",{className:h.a.ImageGalleryItem,src:t,alt:a})}):Object(u.jsx)("li",{className:h.a.Images,onClick:function(){return r(n,a)},loading:"lazy",children:Object(u.jsx)("img",{className:h.a.ImageGalleryItem,src:t,alt:a})})})};var O=a(17),f=a.n(O),p=function(e){var t=e.onClick;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("button",{type:"button",className:f.a.Button,onClick:function(){return t()},children:"Load more"})})},x=a(18),y=a.n(x),_=(a(45),function(e,t){switch(t.type){case"pending":return Object(b.a)(Object(b.a)({},e),{},{image:[],status:"pending",searchName:t.payload});case"resolved":return Object(b.a)(Object(b.a)({},e),{},{image:[].concat(Object(j.a)(e.image),Object(j.a)(t.payload)),status:"resolved"});case"rejected":return Object(b.a)(Object(b.a)({},e),{},{error:t.payload,status:"rejected"});case"nextPage":return Object(b.a)(Object(b.a)({},e),{},{page:e.page+1});default:throw new Error}}),S=function(e){var t=e.searchName,a=e.onClick,c=Object(r.useReducer)(_,{searchName:"",image:[],status:"idle",error:null,page:1,myRef:n.a.createRef()}),o=Object(s.a)(c,2),l=o[0],i=o[1];Object(r.useEffect)((function(){t&&(t!==l.searchName&&i({type:"pending",payload:t}),function(e,t){var a="https://pixabay.com/api/"+"?q=".concat(e,"&page=").concat(t,"&key=").concat("23933594-99c5d6abfa76120a4e36d3057","&image_type=photo&orientation=horizontal&per_page=12");return fetch(a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Oops, something went wrong."))}))}(t,l.page).then((function(e){if(0===e.hits.length)return Promise.reject(new Error("No results were found for your search."));e.hits[0]=Object(b.a)(Object(b.a)({},e.hits[0]),{},{myRef:l.myRef}),i({type:"resolved",payload:e.hits}),l.myRef.current.scrollIntoView({behavior:"smooth",block:"end"})})).catch((function(e){return i({type:"rejected",payload:e})})))}),[t,l.myRef,l.page,l.searchName]);return Object(u.jsxs)(u.Fragment,{children:["idle"===l.status&&Object(u.jsx)("p",{children:"Input value"}),"rejected"===l.status&&Object(u.jsx)("strong",{children:l.error.message}),l.image.length>0&&Object(u.jsx)("ul",{className:h.a.Galere,children:l.image.map((function(e){return Object(u.jsx)(g,{onClick:a,srs:e.webformatURL,alt:e.tags,largeImageURL:e.largeImageURL,myRef:e.myRef},e.id)}))}),"pending"===l.status&&Object(u.jsx)(y.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}),"resolved"===l.status&&Object(u.jsx)(p,{onClick:function(){i({type:"nextPage"})}})]})},v=a(15),I=a(19),w=a(10),N=(a(16),a(8)),k=a.n(N),C=function(e){var t=e.onSubmit,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(u.jsx)("div",{className:"searchbar",children:Object(u.jsxs)("form",{className:k.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):w.b.warn("Input value!")},children:[Object(u.jsx)("button",{type:"submit",className:k.a.SearchFormButton,children:Object(u.jsx)(I.a,{})}),Object(u.jsx)("label",{htmlFor:Object(v.a)(),className:k.a.SearchFormButtonLabel,children:"Search pictures"}),Object(u.jsx)("input",{id:Object(v.a)(),className:k.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})},F=a(11),B=a.n(F),R=document.querySelector("#modal-root"),G=function(e){var t=e.src,a=e.alt,n=e.onClose;Object(r.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}),[]);var o=function(e){"Escape"===e.code&&n(null,null)};return Object(c.createPortal)(Object(u.jsx)("div",{className:B.a.Overlay,onClick:function(e){e.currentTarget===e.target&&n(null,null)},children:Object(u.jsxs)("div",{className:B.a.Modal,children:[Object(u.jsx)("button",{type:"button",className:B.a.Button,onClick:n,children:"Close"}),Object(u.jsx)("img",{src:t,alt:a})]})}),R)},L=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),o=Object(s.a)(c,2),l=o[0],i=o[1],j=Object(r.useState)({}),b=Object(s.a)(j,2),d=b[0],h=b[1],g=function(e,t){i(!l),h({imageSrc:e,imageAlt:t})};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{color:"#3f51b5",children:Object(u.jsx)(C,{onSubmit:function(e){n(e)}})}),Object(u.jsx)(m,{children:Object(u.jsx)(S,{searchName:a,onClick:g})}),l&&Object(u.jsx)(G,{src:d.imageSrc,alt:d.imageAlt,onClose:g}),Object(u.jsx)(w.a,{autoClose:4e3})]})};a(46);o.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(L,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={Galere:"ImageGallery_Galere__1xNXl",Images:"ImageGallery_Images__21YG7",ImageGalleryItem:"ImageGallery_ImageGalleryItem__IRnGg"}},8:function(e,t,a){e.exports={SearchForm:"Searchbar_SearchForm__226Lr",SearchFormButton:"Searchbar_SearchFormButton__2Avmn",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__JlGV3",SearchFormInput:"Searchbar_SearchFormInput__oTa3i"}}},[[47,1,2]]]);
//# sourceMappingURL=main.b8259627.chunk.js.map